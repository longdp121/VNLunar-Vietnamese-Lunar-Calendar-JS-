<!DOCTYPE html>
<html lang="vi">

<head>
  <!-- Base -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Lịch Âm Dương Việt Nam — Chuyển đổi Dương ↔ Âm chính xác (UTC+7)</title>
  <meta name="description"
    content="Công cụ chuyển đổi lịch Dương sang Âm và ngược lại cho Việt Nam (UTC+7). Tính Can–Chi ngày, tháng, năm; hỗ trợ tháng nhuận. Nhanh, chính xác, miễn phí." />
  <link rel="canonical" href="https://vn-lunar-vietnamese-lunar-calendar.vercel.app/" />
  <meta name="robots" content="index, follow, max-snippet:-1, max-image-preview:large, max-video-preview:-1" />
  <meta name="author" content="YOUR_NAME_OR_BRAND" />
  <meta name="theme-color" content="#2563eb" />

  <!-- Language / i18n -->
  <meta http-equiv="content-language" content="vi" />
  <link rel="alternate" href="https://vn-lunar-vietnamese-lunar-calendar.vercel.app/" hreflang="vi" />
  <!-- If you add English later, uncomment:
  <link rel="alternate" href="https://vn-lunar-vietnamese-lunar-calendar.vercel.app/en" hreflang="en" />
  -->

  <!-- Open Graph -->
  <meta property="og:type" content="website" />
  <meta property="og:locale" content="vi_VN" />
  <meta property="og:site_name" content="VNLunar" />
  <meta property="og:title" content="Lịch Âm Dương Việt Nam — Chuyển đổi Dương ↔ Âm chính xác" />
  <meta property="og:description"
    content="Chuyển đổi lịch Dương ↔ Âm (UTC+7), tính Can–Chi & tháng nhuận theo thời gian thực." />
  <meta property="og:url" content="https://vn-lunar-vietnamese-lunar-calendar.vercel.app/" />
  <meta property="og:image" content="https://YOUR_CDN.com/og/vnlunar-1200x630.png" />
  <meta property="og:image:width" content="1200" />
  <meta property="og:image:height" content="630" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Lịch Âm Dương Việt Nam — Chuyển đổi Dương ↔ Âm" />
  <meta name="twitter:description"
    content="Chuyển đổi Dương ↔ Âm, Can–Chi ngày tháng năm, hỗ trợ tháng nhuận. Nhanh & chính xác." />
  <meta name="twitter:image" content="https://YOUR_CDN.com/og/vnlunar-1200x630.png" />

  <!-- Icons / PWA (optional) -->
  <link rel="icon" href="/favicon.ico" sizes="any" />
  <link rel="icon" type="image/svg+xml" href="/icon.svg" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />
  <link rel="manifest" href="/site.webmanifest" />

  <!-- Helpful keywords (optional) -->
  <meta name="keywords"
    content="lịch âm, lịch dương, chuyển đổi lịch, âm dương, can chi, tháng nhuận, lịch âm hôm nay, lịch việt nam" />

  <!-- Structured Data: WebApplication -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"WebApplication",
    "name":"VNLunar — Chuyển đổi Dương ↔ Âm",
    "url":"https://vn-lunar-vietnamese-lunar-calendar.vercel.app/",
    "inLanguage":"vi",
    "applicationCategory":"UtilitiesApplication",
    "operatingSystem":"Any",
    "description":"Công cụ chuyển đổi lịch Dương sang Âm và ngược lại (UTC+7) cho Việt Nam. Tính Can–Chi, hỗ trợ tháng nhuận.",
    "creator":{
      "@type":"Organization",
      "name":"YOUR_NAME_OR_BRAND",
      "url":"https://vn-lunar-vietnamese-lunar-calendar.vercel.app/"
    },
    "offers":{
      "@type":"Offer",
      "price":"0",
      "priceCurrency":"VND"
    }
  }
  </script>

  <!-- Structured Data: FAQ -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"FAQPage",
    "mainEntity":[
      {
        "@type":"Question",
        "name":"Làm sao chuyển lịch Dương sang Âm?",
        "acceptedAnswer":{
          "@type":"Answer",
          "text":"Chọn chế độ Dương → Âm, nhập ngày dương (dd/mm/yyyy). Công cụ trả về ngày âm, kèm Can–Chi và ghi chú tháng nhuận (nếu có)."
        }
      },
      {
        "@type":"Question",
        "name":"Công cụ có tính Can–Chi và tháng nhuận không?",
        "acceptedAnswer":{
          "@type":"Answer",
          "text":"Có. Công cụ hiển thị Can–Chi ngày/tháng/năm và tự nhận biết tháng nhuận theo múi giờ Việt Nam (UTC+7)."
        }
      },
      {
        "@type":"Question",
        "name":"Tôi có thể đổi Âm → Dương không?",
        "acceptedAnswer":{
          "@type":"Answer",
          "text":"Có. Chọn chế độ Âm → Dương, nhập ngày âm và tùy chọn tháng nhuận, công cụ sẽ trả về ngày dương tương ứng."
        }
      }
    ]
  }
  </script>

  <!-- Structured Data: Breadcrumb -->
  <script type="application/ld+json">
  {
    "@context":"https://schema.org",
    "@type":"BreadcrumbList",
    "itemListElement":[
      {"@type":"ListItem","position":1,"name":"Trang chủ","item":"https://vn-lunar-vietnamese-lunar-calendar.vercel.app/"},
      {"@type":"ListItem","position":2,"name":"VNLunar — Chuyển đổi Dương ↔ Âm","item":"https://vn-lunar-vietnamese-lunar-calendar.vercel.app/"}
    ]
  }
  </script>
  <style>
    :root {
      --bg: #f7fafc;
      --card: #ffffff;
      --accent: #2563eb;
      --accent-2: #4f46e5;
      --text: #0f172a;
      --muted: #6b7280;
      --ring: rgba(37, 99, 235, .35);
      --nav-fg: #0b1324;
      --nav-muted: #475569;
      --nav-hover: #111827;
    }

    html,
    body {
      height: 100%;
    }

    body {
      margin: 0;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 20% -20%, #eef2ff 0%, transparent 60%), var(--bg);
      color: var(--text);
      display: grid;
      place-items: center;
      padding: 24px;
    }

    .app {
      width: 100%;
      max-width: 720px;
      background: var(--card);
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(2, 6, 23, .08), 0 2px 8px rgba(2, 6, 23, .05);
      overflow: hidden;
    }

    .head {
      padding: 16px 20px 12px;
      background: linear-gradient(135deg, #dbeafe, #eef2ff);
      border-bottom: 1px solid #e5e7eb;
    }

    /* --- Nav (new) --- */
    .nav {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 12px;
      margin-bottom: 10px;
    }

    .brand {
      font-weight: 700;
      letter-spacing: .2px;
      color: var(--nav-fg);
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }

    .brand .dot {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      box-shadow: 0 0 0 3px rgba(37, 99, 235, .18);
    }

    .links {
      display: inline-flex;
      align-items: center;
      gap: 14px;
    }

    .links a {
      color: var(--nav-muted);
      text-decoration: none;
      font-weight: 600;
      font-size: 13px;
      padding: 6px 8px;
      border-radius: 10px;
      transition: color .15s ease, background .15s ease;
    }

    .links a:hover {
      color: var(--nav-hover);
      background: rgba(255, 255, 255, .6);
    }

    .gh {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 32px;
      height: 32px;
      border-radius: 8px;
      border: 1px solid #e5e7eb;
      background: #fff;
      transition: transform .12s ease, box-shadow .12s ease, border-color .12s ease;
    }

    .gh:hover {
      transform: translateY(-1px);
      box-shadow: 0 6px 18px rgba(2, 6, 23, .08);
      border-color: #d1d5db;
    }

    .gh svg {
      width: 18px;
      height: 18px;
      fill: #111827;
    }

    /* --- End Nav --- */

    .head h1 {
      margin: 0 0 6px;
      font-size: 20px;
      font-weight: 700;
      letter-spacing: .2px;
      color: #0b1324;
    }

    .head p {
      margin: 0;
      color: var(--muted);
      font-size: 13px;
    }

    .content {
      padding: 18px 20px 22px;
      display: grid;
      gap: 16px;
    }

    .center {
      display: grid;
      justify-items: center;
      gap: 12px;
      padding: 6px 8px 10px;
    }

    .datewrap {
      display: grid;
      gap: 6px;
      width: min(100%, 360px);
    }

    label {
      font-size: 12px;
      color: var(--muted);
    }

    input[type="date"] {
      appearance: none;
      width: 100%;
      box-sizing: border-box;
      padding: 10px 12px;
      font-size: 16px;
      border: 1px solid #e5e7eb;
      border-radius: 12px;
      outline: none;
      background: white;
      box-shadow: 0 1px 0 rgba(0, 0, 0, .02) inset;
    }

    input[type="date"]:focus {
      border-color: var(--accent);
      box-shadow: 0 0 0 4px var(--ring);
    }

    /* Toggle */
    .toggle {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 6px 8px;
      border-radius: 999px;
      background: #f1f5f9;
      border: 1px solid #e5e7eb;
      user-select: none;
    }

    .toggle .btn {
      padding: 8px 12px;
      border-radius: 999px;
      font-size: 13px;
      font-weight: 600;
      color: var(--muted);
      cursor: pointer;
      transition: all .15s ease;
    }

    .toggle .btn.active {
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      color: white;
      box-shadow: 0 6px 20px rgba(37, 99, 235, .35);
    }

    .inline {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .chip {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 10px;
      border-radius: 999px;
      background: #f8fafc;
      border: 1px solid #e5e7eb;
      color: #334155;
      font-size: 12px;
    }

    .chip input {
      transform: translateY(1px);
    }

    /* Results */
    .results {
      border-top: 1px dashed #e5e7eb;
      margin-top: 8px;
      padding-top: 6px;
      display: grid;
      gap: 10px;
    }

    .row {
      display: grid;
      grid-template-columns: 160px 1fr;
      gap: 12px;
      align-items: start;
    }

    .key {
      color: var(--muted);
      font-size: 12px;
      padding-top: 4px;
    }

    .val {
      background: #f8fafc;
      border: 1px solid #eef2f7;
      border-radius: 12px;
      padding: 10px 12px;
      font-size: 15px;
    }

    .muted {
      color: var(--muted);
      font-size: 12px;
    }

    .footer {
      padding: 14px 20px 18px;
      border-top: 1px solid #eef2f7;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 8px;
      color: var(--muted);
      font-size: 12px;
    }

    .right {
      text-align: right;
    }

    .hint {
      color: #64748b
    }

    .err {
      color: #b91c1c
    }

    @media (max-width: 560px) {
      .row {
        grid-template-columns: 1fr;
      }

      .key {
        padding-top: 0;
      }
    }
  </style>
</head>

<body>

  <div class="app" role="application" aria-label="Bộ chuyển đổi Dương ↔ Âm lịch">
    <div class="head">
      <!-- NAV (added) -->
      <nav class="nav" aria-label="Liên kết nhanh">
        <a class="brand" href="/" aria-label="Trang chủ vnlunar.js">
          <span class="dot" aria-hidden="true"></span>
          <span>vnlunar.js</span>
        </a>
        <div class="links">
          <a href="/README.md">About</a>
          <a class="gh" href="https://github.com/longdp121/VNLunar-Vietnamese-Lunar-Calendar-JS-" target="_blank"
            rel="noopener noreferrer" aria-label="GitHub repository">
            <!-- GitHub Mark (SVG) -->
            <svg viewBox="0 0 16 16" aria-hidden="true">
              <path
                d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.13 0 0 .67-.22 2.2.82.64-.18 1.33-.27 2.01-.27.68 0 1.37.09 2.01.27 1.53-1.04 2.2-.82 2.2-.82.44 1.11.16 1.93.08 2.13.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.01 8.01 0 0 0 16 8c0-4.42-3.58-8-8-8z" />
            </svg>
          </a>
        </div>
      </nav>

      <h1>Chuyển lịch Dương ↔ Âm (VN)</h1>
      <p>Nhập ngày, chọn chế độ. Kết quả cập nhật theo thời gian thực. (UTC+7)</p>
    </div>

    <div class="content">

      <div class="center">
        <div class="datewrap">
          <label for="datepick">Chọn ngày</label>
          <input id="datepick" type="date" />
        </div>

        <div class="inline">
          <div class="toggle" role="tablist" aria-label="Chọn chế độ chuyển đổi">
            <div class="btn active" id="mode-s2l" role="tab" aria-selected="true">Dương → Âm</div>
            <div class="btn" id="mode-l2s" role="tab" aria-selected="false">Âm → Dương</div>
          </div>

          <label class="chip" id="leapWrap" style="display:none">
            <input id="leap" type="checkbox" />
            <span>Tháng nhuận (Âm)</span>
          </label>
        </div>

        <div class="muted hint" id="modeHint">
          Chế độ <b>Dương → Âm</b>: dùng ngày dương trong ô chọn ngày, kết quả trả về ngày âm tương ứng.
        </div>
      </div>

      <div class="results" aria-live="polite" aria-atomic="true">
        <div class="row">
          <div class="key">Ngày nhập</div>
          <div class="val" id="inputLabel">—</div>
        </div>

        <div class="row">
          <div class="key" id="outTitle">Âm lịch</div>
          <div class="val" id="outMain">—</div>
        </div>

        <div class="row">
          <div class="key">Can–Chi</div>
          <div class="val" id="outCanChi">—</div>
        </div>

        <div class="row">
          <div class="key">Ghi chú</div>
          <div class="val" id="outNote">—</div>
        </div>
      </div>

    </div>

    <div class="footer">
      <div>
        <span class="hint">Mẹo:</span> Bạn có thể đổi chế độ, kết quả vẫn dựa trên cùng một ngày đã chọn.
      </div>
      <div class="right">
        <span class="muted">
          Thuật toán tham khảo: 
          <code>
            <a href="https://vi.wikipedia.org/wiki/M%C3%B4_%C4%91un:%C3%82m_l%E1%BB%8Bch" target="_blank"
            rel="noopener noreferrer">Mô đun:Âm lịch
          </a>
          </code>
        </span>

      </div>
    </div>
  </div>

  <!-- Load library first (blocking, so VNLunar is available) -->
  <script src="vnlunar.js"></script>

  <!-- App Logic -->
  <script>
    (function () {
      if (!window.VNLunar) {
        document.getElementById('outMain').textContent = 'Không tải được thư viện vnlunar.js';
        document.getElementById('outMain').classList.add('err');
        return;
      }
      const {
        toInt,
        UniversalToJD, UniversalFromJD,
        LocalFromJD, LocalToJD,
        NewMoon, SunLongitude,
        LunarMonth11, LunarYear,
        Solar2Lunar, Lunar2Solar,
        canchi
      } = window.VNLunar;

      const utc = 7.0;

      const datepick = document.getElementById('datepick');
      const modeS2LBtn = document.getElementById('mode-s2l');
      const modeL2SBtn = document.getElementById('mode-l2s');
      const leapWrap = document.getElementById('leapWrap');
      const leapChk = document.getElementById('leap');
      const modeHint = document.getElementById('modeHint');

      const inputLabel = document.getElementById('inputLabel');
      const outTitle = document.getElementById('outTitle');
      const outMain = document.getElementById('outMain');
      const outCanChi = document.getElementById('outCanChi');
      const outNote = document.getElementById('outNote');

      let mode = 'S2L';

      const todayISO = new Date().toISOString().slice(0, 10);
      datepick.value = todayISO;

      function fmtDMY(d, m, y) {
        const dd = String(d).padStart(2, '0');
        const mm = String(m).padStart(2, '0');
        return `${dd}/${mm}/${y}`;
      }
      function parseDateInput(val) {
        const [y, m, d] = val.split('-').map(Number);
        return { d, m, y };
      }
      function setMode(m) {
        mode = m;
        if (mode === 'S2L') {
          modeS2LBtn.classList.add('active');
          modeL2SBtn.classList.remove('active');
          leapWrap.style.display = 'none';
          outTitle.textContent = 'Âm lịch';
          modeHint.innerHTML = 'Chế độ <b>Dương → Âm</b>: dùng ngày dương trong ô chọn ngày, kết quả trả về ngày âm tương ứng.';
        } else {
          modeL2SBtn.classList.add('active');
          modeS2LBtn.classList.remove('active');
          leapWrap.style.display = 'inline-flex';
          outTitle.textContent = 'Dương lịch';
          modeHint.innerHTML = 'Chế độ <b>Âm → Dương</b>: diễn giải ngày trong ô chọn ngày là <i>ngày âm</i> (dd/mm/yyyy). Có thể đánh dấu <b>Tháng nhuận</b>.';
        }
        render();
      }

      function render() {
        const val = datepick.value;
        if (!val) {
          inputLabel.textContent = '—';
          outMain.textContent = '—';
          outCanChi.textContent = '—';
          outNote.textContent = '—';
          return;
        }
        const { d, m, y } = parseDateInput(val);

        try {
          if (mode === 'S2L') {
            inputLabel.textContent = `Dương lịch: ${fmtDMY(d, m, y)}`;
            const [ld, lmRaw, ly, leap] = Solar2Lunar(d, m, y, utc);
            const lm = (lmRaw === 0 ? 12 : lmRaw);
            const lunarStr = `${ld < 10 ? 'mồng ' + ld : 'ngày ' + ld} tháng ${lm}${leap ? ' (nhuận)' : ''} năm ${ly}`;
            outMain.textContent = lunarStr;

            const canchiNam = canchi(ly + 57);
            const canchiThang = canchi(ly * 12 + lm + 14);
            const canchiNgay = canchi(toInt(LocalToJD(d, m, y, utc) + 51.5));
            outCanChi.textContent = `Ngày: ${canchingayVN(canchiNgay)} | Tháng: ${canchingayVN(canchiThang)} | Năm: ${canchingayVN(canchiNam)}`;
            outNote.textContent = 'Kết quả theo múi giờ Việt Nam (UTC+7).';
          } else {
            inputLabel.textContent = `Âm lịch (diễn giải): ${fmtDMY(d, m, y)}${leapChk.checked ? ' — tháng nhuận' : ''}`;

            const lm = (m === 12 ? 12 : m);
            const [sd, sm, sy] = Lunar2Solar(d, lm === 12 ? 0 : lm, y, leapChk.checked ? 1 : 0, utc);
            outMain.textContent = `Dương lịch: ${fmtDMY(sd, sm, sy)}`;

            const canchiNam = canchi(y + 57);
            const canchiThang = canchi(y * 12 + lm + 14);
            const jd0 = LocalToJD(sd, sm, sy, utc);
            const canchiNgay = canchi(toInt(jd0 + 51.5));
            outCanChi.textContent = `Ngày: ${canchingayVN(canchiNgay)} | Tháng: ${canchingayVN(canchiThang)} | Năm: ${canchingayVN(canchiNam)}`;
            outNote.textContent = 'Lưu ý: Ô chọn ngày đang được hiểu là ngày âm (dd/mm/yyyy).';
          }
        } catch (e) {
          outMain.textContent = 'Lỗi dữ liệu: ' + e.message;
          outMain.classList.add('err');
          outCanChi.textContent = '—';
          outNote.textContent = '—';
        }
      }

      function canchingayVN(s) { return s.replace(/\s+/g, ' ').trim(); }

      datepick.addEventListener('input', render);
      modeS2LBtn.addEventListener('click', () => setMode('S2L'));
      modeL2SBtn.addEventListener('click', () => setMode('L2S'));
      leapChk.addEventListener('change', render);

      setMode('S2L');
    })();
  </script>
</body>

</html>